<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Alicia en el País de las Maravillas — Juegos</title>
  <style>
    body { font-family: Georgia, serif; background: #fefae0; margin: 20px; }
    h2 { color: #4a148c; }

    /* Memoria */
    .memoria-container {
      display: grid;
      grid-template-columns: repeat(4, 100px);
      grid-gap: 10px;
      justify-content: center;
      margin-bottom: 40px;
    }
    .card {
      width: 100px;
      height: 100px;
      background: #ffa;
      border: 2px solid #6a1b9a;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      cursor: pointer;
      user-select: none;
      position: relative;
    }
    .card.flipped, .card.matched {
      background: #e0f7fa;
      color: #004d40;
    }
    .card.hidden {
      background: #6a1b9a;
      color: #6a1b9a;
    }

    /* Laberinto */
    #maze {
      border: 3px solid #4a148c;
      margin: 0 auto;
      background: white;
    }
    .cell {
      width: 30px;
      height: 30px;
      box-sizing: border-box;
      border: 1px solid #ccc;
    }
    .wall {
      background: #6a1b9a;
    }
    .player {
      background: #ffeb3b;
    }
    .exit {
      background: #4caf50;
    }
  </style>
</head>
<body>

  <h2>Juego de Memoria</h2>
  <div id="memoria" class="memoria-container"></div>
  <div id="memoriaResultado"></div>

  <h2>Labyrinth: Ayuda a Alicia a salir</h2>
  <canvas id="maze" width="300" height="300"></canvas>
  <p>Usa las teclas de flecha para mover a Alicia (el cuadro amarillo) hasta la salida (verde).</p>

  <script>
    /* ======= Juego de Memoria ======= */
    const memoriaContainer = document.getElementById('memoria');
    const memoriaResultado = document.getElementById('memoriaResultado');

    const items = [
      'Sombrerero','Sombrerero',
      'Reina','Reina',
      'Gato','Gato',
      'Conejo','Conejo'
    ];
    let shuffled = items.sort(() => 0.5 - Math.random());
    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    let matches = 0;

    function crearTablero() {
      memoriaContainer.innerHTML = '';
      shuffled.forEach((item, index) => {
        const card = document.createElement('div');
        card.classList.add('card', 'hidden');
        card.dataset.name = item;
        card.innerText = item;
        card.addEventListener('click', flipCard);
        memoriaContainer.appendChild(card);
      });
    }

    function flipCard() {
      if (lockBoard) return;
      if (this === firstCard) return;

      this.classList.remove('hidden');
      this.classList.add('flipped');

      if (!firstCard) {
        firstCard = this;
        return;
      }
      secondCard = this;
      lockBoard = true;

      if (firstCard.dataset.name === secondCard.dataset.name) {
        // acertaron
        firstCard.classList.add('matched');
        secondCard.classList.add('matched');
        resetBoard();
        matches++;
        if (matches === items.length / 2) {
          memoriaResultado.innerText = '¡Ganaste la memoria!';
        }
      } else {
        // no coincide
        setTimeout(() => {
          firstCard.classList.add('hidden');
          secondCard.classList.add('hidden');
          firstCard.classList.remove('flipped');
          secondCard.classList.remove('flipped');
          resetBoard();
        }, 1000);
      }
    }

    function resetBoard() {
      [firstCard, secondCard] = [null, null];
      lockBoard = false;
    }

    crearTablero();

    /* ======= Laberinto ======= */
    const canvas = document.getElementById('maze');
    const ctx = canvas.getContext('2d');
    const cols = 10, rows = 10;
    const cellSize = 30;
    let maze = [];
    let player = { x: 0, y: 0 };
    const exit = { x: cols - 1, y: rows - 1 };

    function initMaze() {
      // Simple laberinto con algunos muros
      for (let y = 0; y < rows; y++) {
        maze[y] = [];
        for (let x = 0; x < cols; x++) {
          maze[y][x] = 0; // 0 = camino
        }
      }
      // Añadir muros manuales para ejemplo
      for (let i = 0; i < cols; i++) {
        maze[3][i] = 1;
        maze[6][i] = 1;
      }
      maze[3][5] = 0;
      maze[6][2] = 0;
    }

    function drawMaze() {
      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          if (maze[y][x] === 1) {
            ctx.fillStyle = '#6a1b9a';
            ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
          } else {
            ctx.fillStyle = '#fff';
            ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
          }
          // dibujar salida
          if (x === exit.x && y === exit.y) {
            ctx.fillStyle = '#4caf50';
            ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
          }
        }
      }
      // dibujar jugador
      ctx.fillStyle = '#ffeb3b';
      ctx.fillRect(player.x * cellSize, player.y * cellSize, cellSize, cellSize);
    }

    function movePlayer(dx, dy) {
      const newX = player.x + dx;
      const newY = player.y + dy;
      if (newX < 0 || newX >= cols || newY < 0 || newY >= rows) return;
      if (maze[newY][newX] === 1) return;
      player.x = newX;
      player.y = newY;
      drawMaze();
      checkExit();
    }

    function checkExit() {
      if (player.x === exit.x && player.y === exit.y) {
        setTimeout(() => {
          alert('¡Alicia ha salido del laberinto!');
          player.x = 0;
          player.y = 0;
          drawMaze();
        }, 100);
      }
    }

    window.addEventListener('keydown', (e) => {
      switch (e.key) {
        case 'ArrowUp': movePlayer(0, -1); break;
        case 'ArrowDown': movePlayer(0, 1); break;
        case 'ArrowLeft': movePlayer(-1, 0); break;
        case 'ArrowRight': movePlayer(1, 0); break;
      }
    });

    initMaze();
    drawMaze();

  </script>

</body>
</html>
