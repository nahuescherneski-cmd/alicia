<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Alicia en el Pa√≠s de las Maravillas</title>
<style>
  body {
    font-family: 'Georgia', serif;
    background-color: #fefae0;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  header {
    background: linear-gradient(90deg, #7ec8e3, #4a90e2);
    color: white;
    text-align: center;
    padding: 20px;
    animation: fadeIn 2s ease-in;
  }

  section {
    padding: 40px;
    text-align: center;
    animation: slideUp 1s ease-in;
  }

  img {
    width: 70%;
    max-width: 500px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    transition: transform 0.4s;
  }

  img:hover {
    transform: scale(1.05) rotate(1deg);
  }

  .juego {
    background: linear-gradient(145deg,#e1bee7,#d1c4e9);
    padding: 40px;
    margin: 40px auto;
    border-radius: 12px;
    max-width: 800px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    position: relative;
  }

  .juego h2 {
    color: #4a148c;
    margin-bottom: 20px;
    animation: pulse 2s infinite alternate;
  }

  .juego button {
    margin: 8px;
    padding: 12px 25px;
    font-size: 1rem;
    background: linear-gradient(90deg, #ba68c8, #ab47bc);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.3s;
  }

  .juego button:hover {
    transform: scale(1.1);
    box-shadow: 0 0 15px #ab47bc;
  }

  .resultado {
    margin-top: 20px;
    font-weight: bold;
    font-size: 1.2rem;
    min-height: 30px;
    transition: transform 0.3s;
  }

  @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
  @keyframes slideUp { from {transform: translateY(30px); opacity: 0;} to {transform: translateY(0); opacity: 1;} }
  @keyframes pulse { from {transform: scale(1);} to {transform: scale(1.05);} }

  /* --- Juego de Memoria --- */
  .memoria-container {
    display: grid;
    grid-template-columns: repeat(6, 80px);
    grid-gap: 10px;
    justify-content: center;
    margin-bottom: 20px;
  }

  .card {
    width: 80px;
    height: 80px;
    background: #6a1b9a;
    color: transparent;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    cursor: pointer;
    transform-style: preserve-3d;
    transition: transform 0.6s;
  }

  .card.flipped {
    background: #e0f7fa;
    color: #004d40;
    transform: rotateY(180deg);
  }

  .timer {
    font-weight: bold;
    color: #4a148c;
    margin-bottom: 15px;
  }

  /* --- Laberinto --- */
  #maze {
    border: 3px solid #4a148c;
    margin: 20px auto;
    display: block;
    border-radius: 12px;
    background: white;
  }

  /* --- Part√≠culas ganadoras --- */
  .particle {
    position: absolute;
    border-radius: 50%;
    animation: fly 2s ease-out forwards;
  }

  @keyframes fly {
    to {
      transform: translateY(-200px) scale(0.5);
      opacity: 0;
    }
  }
</style>
</head>
<body>

<audio autoplay loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>

<header>
  <h1>‚ú® Alicia en el Pa√≠s de las Maravillas ‚ú®</h1>
  <p>Entre l√≥gica y locura‚Ä¶</p>
</header>

<!-- Juego 1 -->
<section class="juego" id="juegoFrases">
  <h2>üé≠ ¬øQui√©n dijo esta frase?</h2>
  <div id="timer1" class="timer"></div>
  <p id="frase"></p>
  <div id="opciones"></div>
  <div class="resultado" id="resultado"></div>
</section>

<!-- Juego 2 -->
<section class="juego" id="juegoMemoria">
  <h2>üÉè Juego de Memoria</h2>
  <div class="timer" id="timer2"></div>
  <div id="memoria" class="memoria-container"></div>
  <div id="memoriaResultado"></div>
</section>

<!-- Juego 3 -->
<section class="juego">
  <h2>üåÄ Laberinto M√°gico</h2>
  <canvas id="maze" width="300" height="300"></canvas>
  <p>Usa las flechas para llegar a la salida üåø</p>
</section>

<script>
/* --- Juego 1 --- */
const frases = [
  { frase: "¬øQui√©n eres t√∫?", personaje: "La Oruga" },
  { frase: "¬°C√≥rtenle la cabeza!", personaje: "Reina de Corazones" },
  { frase: "Siempre es la hora del t√©.", personaje: "Sombrerero Loco" },
  { frase: "Me temo que est√°s completamente loco. Pero las mejores personas lo est√°n.", personaje: "Gato de Cheshire" },
  { frase: "¬°Oh cielos! ¬°Llegar√© tarde!", personaje: "Conejo Blanco" },
  { frase: "Esto es imposible. ‚Äî Solo si crees que lo es.", personaje: "Alicia" },
  { frase: "Si no sabes a d√≥nde vas, cualquier camino sirve.", personaje: "Gato de Cheshire" },
  { frase: "Nada ser√≠a lo que es, porque todo ser√≠a lo que no es.", personaje: "Sombrerero Loco" }
];

const opciones = ["Alicia","Reina de Corazones","Sombrerero Loco","Gato de Cheshire","Conejo Blanco","La Oruga"];
const fraseElem = document.getElementById("frase");
const opcionesElem = document.getElementById("opciones");
const resultadoElem = document.getElementById("resultado");
const timer1 = document.getElementById("timer1");
let fraseActual, tiempoRestante, temporizador;

function mostrarFrase() {
  clearInterval(temporizador);
  resultadoElem.textContent = "";
  fraseActual = frases[Math.floor(Math.random() * frases.length)];
  fraseElem.textContent = `"${fraseActual.frase}"`;
  opcionesElem.innerHTML = "";
  opciones.forEach(p => {
    const btn = document.createElement("button");
    btn.textContent = p;
    btn.onclick = () => verificarRespuesta(p);
    opcionesElem.appendChild(btn);
  });
  tiempoRestante = 10;
  timer1.textContent = `‚è≥ Tiempo: ${tiempoRestante}s`;
  temporizador = setInterval(() => {
    tiempoRestante--;
    timer1.textContent = `‚è≥ Tiempo: ${tiempoRestante}s`;
    if (tiempoRestante <= 0) {
      clearInterval(temporizador);
      resultadoElem.textContent = "‚è∞ Se acab√≥ el tiempo";
      resultadoElem.style.color = "red";
      resultadoElem.style.transform = "scale(1.2)";
      setTimeout(mostrarFrase, 2000);
    }
  }, 1000);
}

function verificarRespuesta(sel) {
  clearInterval(temporizador);
  if (sel === fraseActual.personaje) {
    resultadoElem.textContent = "‚úÖ ¬°Correcto!";
    resultadoElem.style.color = "green";
    resultadoElem.style.transform = "scale(1.3)";
    lanzarParticulas(resultadoElem);
  } else {
    resultadoElem.textContent = `‚ùå Era: ${fraseActual.personaje}`;
    resultadoElem.style.color = "red";
    resultadoElem.style.transform = "scale(1.3)";
  }
  setTimeout(() => {
    resultadoElem.style.transform = "scale(1)";
    mostrarFrase();
  }, 2000);
}
mostrarFrase();

/* --- Juego 2 --- */
const memoriaContainer = document.getElementById('memoria');
const memoriaResultado = document.getElementById('memoriaResultado');
const timer2 = document.getElementById('timer2');
const items = ['üëë','üêá','ü´ñ','üé©','üêõ','üòº','üï∞Ô∏è','üçÑ','üëë','üêá','ü´ñ','üé©','üêõ','üòº','üï∞Ô∏è','üçÑ'];
let firstCard=null, secondCard=null, lock=false, matches=0, tiempo2=45, cronometro2;

function crearTablero() {
  memoriaContainer.innerHTML = '';
  const shuffled = items.sort(() => 0.5 - Math.random());
  shuffled.forEach(i=>{
    const card = document.createElement('div');
    card.classList.add('card');
    card.dataset.valor = i;
    card.textContent = i;
    card.addEventListener('click', voltearCarta);
    memoriaContainer.appendChild(card);
  });
  matches=0;
  tiempo2=45;
  timer2.textContent = `‚è≥ Tiempo: ${tiempo2}s`;
  clearInterval(cronometro2);
  cronometro2 = setInterval(()=>{
    tiempo2--;
    timer2.textContent = `‚è≥ Tiempo: ${tiempo2}s`;
    if(tiempo2<=0){
      clearInterval(cronometro2);
      memoriaResultado.textContent = "üí• Se acab√≥ el tiempo üòø";
      memoriaResultado.style.color = "red";
      bloquearCartas();
    }
  },1000);
}

function voltearCarta() {
  if (lock || this.classList.contains('flipped')) return;
  this.classList.add('flipped');
  if (!firstCard) { firstCard=this; return; }
  secondCard=this;
  lock=true;
  if (firstCard.dataset.valor===secondCard.dataset.valor) {
    matches++;
    resetear();
    if (matches===items.length/2){
      clearInterval(cronometro2);
      memoriaResultado.textContent = "üéâ ¬°Ganaste el juego de memoria!";
      memoriaResultado.style.color = "green";
      lanzarParticulas(memoriaContainer);
    }
  } else {
    setTimeout(()=>{
      firstCard.classList.remove('flipped');
      secondCard.classList.remove('flipped');
      resetear();
    },800);
  }
}

function resetear(){ [firstCard,secondCard]=[null,null]; lock=false; }
function bloquearCartas(){ document.querySelectorAll('.card').forEach(c=>c.style.pointerEvents='none'); }

crearTablero();

/* --- Juego 3 --- */
const canvas = document.getElementById('maze');
const ctx = canvas.getContext('2d');
const cols=15, rows=15, cellSize=20;
canvas.width=cols*cellSize;
canvas.height=rows*cellSize;
let maze = [];
let player={x:0,y:0};
const exit={x:cols-1,y:rows-1};

function generarLaberinto(){
  maze = Array.from({length:rows},()=>Array(cols).fill(0));
  for(let y=0;y<rows;y++){
    for(let x=0;x<cols;x++){
      if(Math.random()<0.25 && !(x===0 && y===0) && !(x===exit.x && y===exit.y)){
        maze[y][x]=1;
      }
    }
  }
}

function dibujarLaberinto(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let y=0;y<rows;y++){
    for(let x=0;x<cols;x++){
      ctx.fillStyle = maze[y][x]===1 ? '#6a1b9a' : '#fff';
      ctx.fillRect(x*cellSize,y*cellSize,cellSize,cellSize);
    }
  }
  ctx.fillStyle='green';
  ctx.fillRect(exit.x*cellSize, exit.y*cellSize, cellSize, cellSize);
  ctx.fillStyle='yellow';
  ctx.fillRect(player.x*cellSize, player.y*cellSize, cellSize, cellSize);
}

function mover(dx,dy){
  const nx=player.x+dx, ny=player.y+dy;
  if(nx<0||nx>=cols||ny<0||ny>=rows) return;
  if(maze[ny][nx]===1) return;
  player.x=nx; player.y=ny;
  dibujarLaberinto();
  if(nx===exit.x && ny===exit.y){
    setTimeout(()=>{
      lanzarParticulas(canvas);
      alert("üéâ ¬°Alicia escap√≥ del laberinto!");
      player={x:0,y:0};
      generarLaberinto();
      dibujarLaberinto();
    },100);
  }
}

window.addEventListener('keydown', e=>{
  if(e.key==='ArrowUp') mover(0,-1);
  if(e.key==='ArrowDown') mover(0,1);
  if(e.key==='ArrowLeft') mover(-1,0);
  if(e.key==='ArrowRight') mover(1,0);
});

generarLaberinto();
dibujarLaberinto();

/* --- Part√≠culas --- */
function lanzarParticulas(element){
  for(let i=0;i<20;i++){
    const p=document.createElement('div');
    p.classList.add('particle');
    p.style.width=p.style.height=Math.random()*8+5+'px';
    p.style.background=`hsl(${Math.random()*360},100%,70%)`;
    const rect=element.getBoundingClientRect();
    p.style.left=rect.left+rect.width/2+'px';
    p.style.top=rect.top+rect.height/2+'px';
    p.style.transform=`translate(${(Math.random()-0.5)*200}px, ${(Math.random()-0.5)*200}px)`;
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),2000);
  }
}
</script>
</body>
</html>
