<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alicia en el País de las Maravillas</title>
<style>
  body {
    background: linear-gradient(to bottom, #a8e6cf, #dcedc1);
    font-family: 'Trebuchet MS', sans-serif;
    text-align: center;
    overflow: hidden;
  }
  h1 { margin-top: 20px; color: #333; }
  .menu, .mundo, .juegos, .laberinto-container { display: none; }
  .activo { display: block; }

  button {
    padding: 12px 20px;
    margin: 10px;
    font-size: 18px;
    cursor: pointer;
    border-radius: 12px;
    border: none;
    background: #ffb6b9;
    transition: transform 0.3s, background 0.3s;
  }
  button:hover { background: #ff8c94; transform: scale(1.1); }

  .laberinto {
    display: grid;
    margin: 20px auto;
    background: #222;
    border: 5px solid #555;
    gap: 2px;
  }
  .celda {
    width: 25px;
    height: 25px;
    background: #eee;
  }
  .pared { background: #333; }
  .jugador { background: #4CAF50; }
  .meta { background: gold; }

  .volver { background: #b5ead7; margin-top: 20px; }
</style>
</head>
<body>

<h1>🌟 Alicia en el País de las Maravillas 🌟</h1>

<!-- 🏠 MENÚ PRINCIPAL -->
<div class="menu activo" id="menu">
  <button onclick="mostrarSeccion('mundoLogico')">🌿 Mundo Lógico</button>
  <button onclick="mostrarSeccion('mundoIlogico')">🌀 Mundo Ilógico</button>
  <button onclick="mostrarSeccion('juegos')">🎮 Juegos</button>
</div>

<!-- 🌿 MUNDO LÓGICO -->
<div class="mundo" id="mundoLogico">
  <h2>🌿 Mundo Lógico</h2>
  <p>Aquí todo tiene sentido… o casi 😉</p>
  <p><b>Dato curioso:</b> El sombrerero loco se basa en un personaje real del siglo XIX.</p>
  <button class="volver" onclick="mostrarSeccion('menu')">Volver al Menú</button>
</div>

<!-- 🌀 MUNDO ILÓGICO -->
<div class="mundo" id="mundoIlogico">
  <h2>🌀 Mundo Ilógico</h2>
  <p>“El tiempo corre al revés y las flores hablan.” 🌸⏳</p>
  <p><b>Dato curioso:</b> Lewis Carroll era matemático, por eso hay acertijos escondidos en el libro.</p>
  <button class="volver" onclick="mostrarSeccion('menu')">Volver al Menú</button>
</div>

<!-- 🎮 JUEGOS -->
<div class="juegos" id="juegos">
  <h2>🎮 Juegos</h2>
  <button onclick="iniciarLaberinto('facil')">Laberinto Fácil</button>
  <button onclick="iniciarLaberinto('medio')">Laberinto Medio</button>
  <button onclick="iniciarLaberinto('dificil')">Laberinto Difícil</button>
  <button onclick="iniciarLaberinto('imposible')">Laberinto Imposible 😈</button>
  <button class="volver" onclick="mostrarSeccion('menu')">Volver al Menú</button>
</div>

<!-- 🧭 LABERINTO -->
<div class="laberinto-container" id="laberintoContainer">
  <h2 id="tituloLaberinto"></h2>
  <div id="laberinto" class="laberinto"></div>
  <button class="volver" onclick="mostrarSeccion('juegos')">Volver a Juegos</button>
</div>

<script>
let jugador = { x: 0, y: 0 };
let meta = { x: 0, y: 0 };
let mapa = [];
let tamaño = 10;

function mostrarSeccion(id) {
  document.querySelectorAll('.menu, .mundo, .juegos, .laberinto-container')
    .forEach(s => s.classList.remove('activo'));
  document.getElementById(id).classList.add('activo');
}

function generarLaberinto(nivel) {
  if(nivel === 'facil') tamaño = 10;
  if(nivel === 'medio') tamaño = 15;
  if(nivel === 'dificil') tamaño = 20;
  if(nivel === 'imposible') tamaño = 25;

  mapa = Array.from({ length: tamaño }, () =>
    Array.from({ length: tamaño }, () => Math.random() < 0.3 ? 1 : 0)
  );

  // 🟢 Posición inicial y meta garantizadas como camino
  jugador = { x: 0, y: 0 };
  meta = { x: tamaño - 1, y: tamaño - 1 };
  mapa[jugador.y][jugador.x] = 0;
  mapa[meta.y][meta.x] = 0;
}

function dibujarLaberinto() {
  const contenedor = document.getElementById('laberinto');
  contenedor.innerHTML = '';
  contenedor.style.gridTemplateColumns = `repeat(${tamaño}, 25px)`;

  mapa.forEach((fila, y) => {
    fila.forEach((celda, x) => {
      const div = document.createElement('div');
      div.classList.add('celda');
      if (celda === 1) div.classList.add('pared');
      if (jugador.x === x && jugador.y === y) div.classList.add('jugador');
      if (meta.x === x && meta.y === y) div.classList.add('meta');
      contenedor.appendChild(div);
    });
  });
}

function iniciarLaberinto(nivel) {
  generarLaberinto(nivel);
  document.getElementById('tituloLaberinto').textContent = 
    `🧭 Nivel: ${nivel.toUpperCase()}`;
  dibujarLaberinto();
  mostrarSeccion('laberintoContainer');
}

// 🕹️ Movimiento con flechas
document.addEventListener('keydown', e => {
  if(!document.getElementById('laberintoContainer').classList.contains('activo')) return;
  e.preventDefault(); // ✨ evita scroll

  let nuevoX = jugador.x;
  let nuevoY = jugador.y;

  if (e.key === 'ArrowUp') nuevoY--;
  if (e.key === 'ArrowDown') nuevoY++;
  if (e.key === 'ArrowLeft') nuevoX--;
  if (e.key === 'ArrowRight') nuevoX++;

  // Validar límites y paredes
  if (nuevoX >= 0 && nuevoX < tamaño && nuevoY >= 0 && nuevoY < tamaño && mapa[nuevoY][nuevoX] === 0) {
    jugador.x = nuevoX;
    jugador.y = nuevoY;
    dibujarLaberinto();

    if (jugador.x === meta.x && jugador.y === meta.y) {
      setTimeout(()=>{
        alert('🎉 ¡Nivel completado!');
        mostrarSeccion('juegos');
      },100);
    }
  }
});
</script>
</body>
</html>
